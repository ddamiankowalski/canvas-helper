import { createHelper } from './dist/index.js'

const wrapper = document.getElementById('wrapper');

if(!wrapper) {
    throw new Error('Could not find the wrapper');
}

const initialModel = {
    xPos: 150,
    yPos: 250,
    arr: [
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
        Math.max(Math.min(Math.random(), 0.51), 0.49),
    ]
}

const { model, setScene } = createHelper(wrapper, initialModel);

setScene((draw) => {
    draw.line(
        model.arr.map((v, index) => {
            return { x: index / model.arr.length * draw.width, y: v * draw.height }
        })
    )
})

setInterval(() => {
    model.arr = model.arr.map(a => a + (Math.random() - 0.5) / 600)
})